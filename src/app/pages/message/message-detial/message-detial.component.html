<section class="message-container" fxLayout="column nowrap">
  <article fxFlex="1 1 auto" #article>
    <ul>
      <ng-container *ngFor="let message of messages$ | async" >
        <li class="mar-all-1 sender"
          *ngIf="message.uid === sender.uid; else addresseeView">
          <span class="content pad-all-1"
            [matTooltip]="message.createdAt | date:'hh:mm'" matTooltipPosition="left"
            [matTooltipHideDelay]="300">
            {{message.content}}
          </span>
          <img class="mar-l-1 avatar-img"
            [src]="sender.photoURL || 'assets/img/avatar.jpg'"
            [matTooltip]="sender.displayName" matTooltipPosition="left"
            alt="sender photo">
        </li>
        <ng-template #addresseeView>
          <li class="mar-all-1 addressee">
            <img class="avatar-img mar-r-1 "
              [src]="addressee.photoURL || 'assets/img/avatar.jpg'"
              [matTooltip]="addressee.displayName" matTooltipPosition="left"
              alt="addressee photo">
            <span class="content pad-all-1"
              [matTooltip]="message.createdAt | date:'hh:mm'" matTooltipPosition="right"
              [matTooltipHideDelay]="300">
              {{message.content}}
            </span>
          </li>
        </ng-template>
      </ng-container>
    </ul>
  </article>
  <footer fxFlex="1 1 65px">
    <form [formGroup]="messageForm" (ngSubmit)="submitMessage()"
      fxLayout="row nowrap"
      fxLayoutAlign="center center">
      <mat-form-field fxFlex="1 1 auto" fxFlexAlign="end">
        <input matInput autocomplete="off"
          formControlName="content"
          placeholder="{{sender?.email}}想說什麼呢？"
          >
      </mat-form-field>
      <div fxFlex="1 1 100px" class="t-al-c">
        <button mat-raised-button color="accent">送出</button>
      </div>
    </form>
  </footer>
</section>


<!-- matTextareaAutosize
          matAutosizeMaxRows="5" -->
